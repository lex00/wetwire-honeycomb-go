name: ecommerce_checkout
description: E-commerce checkout observability with Honeycomb queries, SLOs, triggers, and dashboards

domains:
  - name: honeycomb
    cli: wetwire-honeycomb
    mcp_tools:
      lint: wetwire_lint
      build: wetwire_build
      discover: wetwire_discover
      graph: wetwire_graph
    outputs:
      - output/*.json

prompts:
  default: prompts/complex_scenario.txt
  simple: prompts/checkout_only.txt
  slo_focus: prompts/slo_focus.txt

validation:
  honeycomb:
    queries: { min: 4 }
    slos: { min: 3 }
    triggers: { min: 2 }
    boards: { min: 1 }

# Resource dependencies for graph visualization
resources:
  queries:
    - name: CheckoutFlowLatency
      description: P99/P95/P50 latency across checkout services
    - name: PaymentFraudCorrelation
      description: Trace correlation between payment and fraud detection
    - name: ErrorRateByService
      description: Error rates broken down by service
    - name: CheckoutFunnel
      description: Request funnel through checkout stages

  slos:
    - name: CheckoutAvailability
      description: 99.9% availability over 30 days
      depends_on:
        - CheckoutFlowLatency
    - name: CheckoutLatency
      description: 95% of requests under 2 seconds
      depends_on:
        - CheckoutFlowLatency
    - name: PaymentSuccess
      description: 99.95% payment success rate
      depends_on:
        - PaymentFraudCorrelation

  triggers:
    - name: HighLatencyAlert
      description: P99 latency exceeds 3 seconds
      depends_on:
        - CheckoutFlowLatency
        - CheckoutLatency
    - name: ErrorRateAlert
      description: Error rate exceeds 1%
      depends_on:
        - ErrorRateByService

  boards:
    - name: CheckoutDashboard
      description: Unified checkout monitoring dashboard
      depends_on:
        - CheckoutFlowLatency
        - ErrorRateByService
        - CheckoutFunnel
        - CheckoutAvailability
