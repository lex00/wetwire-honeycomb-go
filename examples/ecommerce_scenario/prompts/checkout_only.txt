# E-commerce Checkout Queries

Create a focused set of queries for monitoring e-commerce checkout flow using wetwire-honeycomb-go.

## Requirements

Create these three queries in `queries.go`:

### 1. CheckoutFlowLatency

Track end-to-end checkout latency across checkout services:
- Dataset: otel-demo
- TimeRange: 1 hour
- Breakdowns: service.name, http.route
- Calculations: P99(duration_ms), P95(duration_ms), P50(duration_ms), Avg(duration_ms), Count()
- Filters:
  - service.name in [checkoutservice, cartservice, paymentservice, frauddetectionservice]

### 2. PaymentFraudCorrelation

Correlate payment attempts with fraud detection results:
- Dataset: otel-demo
- TimeRange: 24 hours
- Breakdowns: fraud.detected, payment.status, payment.method
- Calculations: Count(), Avg(fraud.score)
- Filters:
  - trace.parent_id exists (ensure trace context)

### 3. ErrorRateByService

Track error rates across all checkout services:
- Dataset: otel-demo
- TimeRange: 2 hours
- Breakdowns: service.name, error.type
- Calculations: Count()
- Filters:
  - error exists
  - service.name in [checkoutservice, cartservice, paymentservice, frauddetectionservice]

## Implementation Notes

- Package name: `ecommerce_scenario`
- Import: `github.com/lex00/wetwire-honeycomb-go/query`
- Use top-level var declarations
- Use typed functions:
  - Calculations: query.P99(), query.Count(), query.Avg()
  - Filters: query.Exists(), query.Contains()
  - Time ranges: query.Hours(), query.Days()

## File Structure

```
examples/ecommerce_scenario/
└── queries.go    # All 3 queries as top-level vars
```

## Expected Output

These queries should compile cleanly and generate valid Honeycomb Query JSON that can be used to monitor:
- Checkout latency patterns by service and endpoint
- Payment fraud detection effectiveness
- Error distribution across checkout services
